@using NonFactors.Mvc.Grid
@model IEnumerable<ContactViewModel>
@{
    var lang = ViewBag.lang;
}
<link href="~/css/mvc-grid/mvc-grid.css" rel="stylesheet" />
@section breadcrumb{
    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">@Resource.Home</a></li>
}
<div class="row">
    <h2 class="col-8 col-sm-10">@Resource.Vistors_messages</h2>
</div>
<div class="modal" id="delete">
    <div class="modal-dialog">
        <div class="modal-content">
            <form asp-action="delete" id="deleteForm">
                @Html.Hidden("ContactToDeleteId")
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">@Resource.Delete</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    @Resource.Are_sure_of_the_deleting_process
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="submit" class="btn btn-danger">@Resource.Yes</button>&nbsp;
                    <button type="button" class="btn btn-light" data-dismiss="modal">@Resource.No</button>
                </div>
            </form>
        </div>
    </div>
</div>
@(Html
    .Grid(Model)
    .Build(columns =>
    {
        columns.Add(model => model.Name);
        columns.Add(model => model.Email);
        columns.Add(model => model.Phone);
        columns.Add(model => model.Message);
        columns.Add( a => a.Id).RenderedAs(a => Html.DropdownBtnGroup($"<a class='btn btn-info' href='{Url.ActionLink("Details", null, new { Id = a.Id })}'>{Resource.View}</a>",
     $"<a class='btn btn-link delete' data-id={a.Id} href='{Url.ActionLink("#", null, new { Id = a.Id })}'>{Resource.Delete}</a>")).Encoded(false).Filterable(false).Sortable(false);
    }).Using(GridFilterMode.Header)
    .Empty(Resource.Data_not_found)
    .Filterable()
    .Sortable()
    .Pageable()
)
@section scripts{
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script src="~/js/mvc-grid/mvc-grid.js"></script>
    <script>
        document.querySelectorAll(".mvc-grid").forEach(element => new MvcGrid(element));
        $(document).ready(function () {
            $(".delete").click(function (event) {
                event.preventDefault();
                $("#ContactToDeleteId").val($(this).data("id"));
                $("#delete").modal('show');
            });
        });
    </script>
    <script>
        @if (lang == "ar")
        {
            <text>
        MvcGrid.lang = {
        default: {
            "equals": "يساوي",
            "not-equals": "لا يساوي"
        },
        text: {
            "contains": "يحتوي على",
            "equals": "يساوي",
            "not-equals": "لا يساوي",
            "starts-with": "يبدأ بـ",
            "ends-with": "ينتهي بـ"
        },
        number: {
            "equals": "يساوي",
            "not-equals": "لا يساوي",
            "less-than": "أقل من",
            "greater-than": "أكبرمن",
            "less-than-or-equal": "أقل من أو يساوي",
            "greater-than-o-requal": "أكبر من أو يساوي"
        },
        date: {
            "equals": "يساوي",
            "not-equals": "لا يساوي",
            "earlier-than": "أقل من",
            "later-than": "أكبرمن",
            "earlier-than-or-equal": "أقل من أو يساوي",
            "later-than-or-equal": "أكبر من أو يساوي"
        },
        guid: {
            "equals": "يساوي",
            "not-equals": "لا يساوي",
        },
        filter: {
            "apply": "✓",
            "remove": "✘"
        },
        operator: {
            "select": "",
            "and": "et",
            "or": "ou"
        }
    };

        </text>
        }


    </script>
}